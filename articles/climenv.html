<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gettings started with 'climenv' • climenv</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Gettings started with 'climenv'">
<meta property="og:description" content="climenv">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">climenv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/climenv.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Italian_Biomes.html">Exploring the Italian biome data sets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jamestsakalos/climenv/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Gettings started with ‘climenv’</h1>
                        <h4 data-toc-skip class="author">James L.
Tsakalos (<a href="mailto:james.tsakalos@gmail.com" class="email">james.tsakalos@gmail.com</a>), Martin R. Smith, Federico
Luebert, Ladislav Mucina</h4>
            
            <h4 data-toc-skip class="date">2023-10-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jamestsakalos/climenv/blob/HEAD/vignettes/climenv.Rmd" class="external-link"><code>vignettes/climenv.Rmd</code></a></small>
      <div class="hidden name"><code>climenv.Rmd</code></div>

    </div>

    
    
<style>
body {
text-align: justify}
</style>
<style>
p.caption {
  font-size: 0.9em;
  font-style: normal;
  color: grey;
  margin-right: 10%;
  margin-left: 10%;  
  text-align: justify;
}
</style>
<hr>
<div class="section level2">
<h2 id="an-example-application-of-climenv">An example application of climenv<a class="anchor" aria-label="anchor" href="#an-example-application-of-climenv"></a>
</h2>
<p>This vignette shows on example application of <code>climenv</code>
(short for <strong><em>Clim</em></strong>atic
<strong><em>Env</em></strong>elope) to illustrate the concepts and
functionality incorporated in the package. Specifically, the example
facilitates easy downloading, extraction and visualization of three of
the most globally recognizable modeled data sets (CHELSA, WorldClim 2
and NASA’s SRTM elevation) using example multi and single geospatial
polygon and point data.</p>
<p>Specifically, supplied with geospatial polygon and point data the
package can easily download, extract and visualize climatic data. The
visualization options include a custom plot coupled with helpful
tabulated climatic properties, Holdridge’s (1967) life zone
classification and Walter-Leight’s (1960) climate diagrams. To our
knowledge this is the first time that the Holdridge diagram has been
presented in R.</p>
<div class="section level3">
<h3 id="downloading-climate-and-elevation-data">Downloading climate and elevation data<a class="anchor" aria-label="anchor" href="#downloading-climate-and-elevation-data"></a>
</h3>
<p><code>ce_download</code> downloads WorldClim 2 (Fick &amp; Hijmans,
2017), CHELSA (Karger et al., 2017) and NASA Earth Explorer’s SRTM (Farr
et al., 2007). CHESLA and WorldClim are available at a spatial
resolution of 30 arc-seconds (~1 km<sup>2</sup>). The data are freely
available as a series of raster tiles (one for each month) with their
spatial extent spanning the globe. Specifically, the function downloads
the mean, minimum and maximum temperature and mean precipitation using
the climatic predictions for periods 1979–2013 (CHELSA) and 1970–2000
(WorldClim 2).</p>
<p><code>ce_download</code> also downloads NASA’s SRTM data at the same
30 arc-second (~1 km<sup>2</sup>) resolution. However, unlike CHELSA and
WorldClim, the SRTM data can be downloaded as a series of individual
tiles. While the spatial extent of CHELSA and WorldClim 2 spans the
globe, <code>ce_download</code> derives and mosaics the SRTM tiles
matching the extent provided by the user. Downloading a subset of tiles
is advantageous because it will download quicker and occupy less
storage.</p>
<p>Because the vignette is required to run quickly and downloading
climatic data (4.67 or 13.7 GBs for CHELSA and WorldClim 2, resp.) takes
considerable time (ca. 6 or 19 minutes at 100 Mbit/s). For simplicity we
have provided code to create artificial climate data of known
properties. For a full demonstration on how to download data please see
the package help documentation or Tsakalos et al. (2021).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's make some training data</span></span>
<span></span>
<span><span class="co"># Create temporary file to supply to the ce_extract</span></span>
<span><span class="va">temp_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the  sub-folders</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"elev"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"prec"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"tmax"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"tavg"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"tmin"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span><span class="op">)</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a empty raster serving as a base</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">10</span>, nrow <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Modify the base Raster values and save them in correct configuration</span></span>
<span></span>
<span><span class="co">#* Elevation 100m ####</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"/elev/srtm.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prec</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">25</span>, <span class="fl">34.40666</span>, <span class="fl">25</span>, <span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">*</span> <span class="fl">8</span></span>
<span><span class="va">temp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"prec_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02d"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">temp2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"/prec/"</span>, <span class="va">temp2</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># tmax</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">43</span>, <span class="fl">38</span>, <span class="fl">33</span>, <span class="fl">29</span>, <span class="fl">25</span>, <span class="fl">19.8</span>, <span class="fl">17.01</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">37</span>, <span class="fl">44</span><span class="op">)</span></span>
<span><span class="va">temp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"tmax_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02d"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">temp2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"/tmax/"</span>, <span class="va">temp2</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># tmin</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">43</span>, <span class="fl">38</span>, <span class="fl">33</span>, <span class="fl">29</span>, <span class="fl">25</span>, <span class="fl">19.8</span>, <span class="fl">17.01</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">37</span>, <span class="fl">44</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">temp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"tmin_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02d"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">temp2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"/tmin/"</span>, <span class="va">temp2</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># tmean</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">43</span>, <span class="fl">38</span>, <span class="fl">33</span>, <span class="fl">29</span>, <span class="fl">25</span>, <span class="fl">19.8</span>, <span class="fl">17.01</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">37</span>, <span class="fl">44</span><span class="op">)</span> <span class="op">-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">43</span>, <span class="fl">38</span>, <span class="fl">33</span>, <span class="fl">29</span>, <span class="fl">25</span>, <span class="fl">19.8</span>, <span class="fl">17.01</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">37</span>, <span class="fl">44</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">temp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"tavg_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02d"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>, <span class="st">".tif"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">temp2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_path</span>, <span class="st">"/tavg/"</span>, <span class="va">temp2</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create a polygon file from the raster</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span></span>
<span><span class="va">pol_py</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/as.polygons.html" class="external-link">as.polygons</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pol_py</span><span class="op">$</span><span class="va">grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="fl">25</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"high"</span>, <span class="fl">75</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a point file from the raster</span></span>
<span><span class="va">pol_pt</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/as.points.html" class="external-link">as.points</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pol_pt</span><span class="op">$</span><span class="va">grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="fl">25</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"high"</span>, <span class="fl">75</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extracting-the-statistics-of-the-distribution-of-values-for-each-climatic-variable-within-the-area">Extracting the statistics of the distribution of values for each
climatic variable within the area<a class="anchor" aria-label="anchor" href="#extracting-the-statistics-of-the-distribution-of-values-for-each-climatic-variable-within-the-area"></a>
</h3>
<p>Now that the climate and elevation data have been created, the next
step is to use <code>ce_extract</code> to extract the climatic data
using the pol_py and pol_pt geospatial data sets. This function’s
general workflow is to read in the newly downloaded data as a series of
raster stacks (processing time should be shorter when using a raster
stack, see Hijmans, 2020). Once the stacks are read in, the function
continues to crop and mask using a unique feature stored in the
multi-point or multi-polygon geospatial data set. For example, the
climatic and environmental data can be extracted for all Sibillini
National Park or high and low sections. This feature is controlled by
the ‘location.g’ argument, specifying a column in the geospatial data
set.</p>
<p><code>ce_extract</code> adds a buffer of 2 km when small polygon
sizes return no results. The polygon is transformed from a geographic
coordinate system into a projected coordinate system using the
‘spTransform’ function. This transformation allows for a metric buffer
to be added to the polygon.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract the climate data</span></span>
<span></span>
<span><span class="va">data_py</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ce_extract.html">ce_extract</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span><span class="op">)</span>,</span>
<span>  location <span class="op">=</span> <span class="va">pol_py</span>,</span>
<span>  location_g <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in .location_helper(location, location_g, location_df): location_g must be one of: lyr.1, grp, id</span></span>
<span><span class="co">#&gt; Defaulting to a unique id for each polygon or point object</span></span>
<span></span>
<span><span class="va">data_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ce_extract.html">ce_extract</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_path</span><span class="op">)</span>,</span>
<span>  location <span class="op">=</span> <span class="va">pol_pt</span>,</span>
<span>  location_g <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in .location_helper(location, location_g, location_df): location_g must be one of: lyr.1, grp, id, optional</span></span>
<span><span class="co">#&gt; Defaulting to a unique id for each polygon or point object</span></span></code></pre></div>
<p>The returned data object is a list containing five data sets.
Specifically, one data set each is returned for precipitation and mean-,
maximum- and minimum-temperature. One data set is produced for altitude
and continentality. These data sets are amenable to further use by the
user, such as covariates in any number of modelling exercises.</p>
</div>
<div class="section level3">
<h3 id="visualizing-the-climatic-and-elevation-data">Visualizing the climatic and elevation data<a class="anchor" aria-label="anchor" href="#visualizing-the-climatic-and-elevation-data"></a>
</h3>
<p><code>climenv</code> offers three functions for visualising the
climatic data extracted from points or polygons in various formats.</p>
<p>The third climate diagram is one of our own design (see Macintyre
&amp; Mucina, 2021).</p>
<p><code>plot_h</code> produces Holdridge’s life zone classification
plot, also known as the Holdridge Life Zone System or Holdridge
Bioclimatic Classification System, is based on three main factors that
influence the distribution of vegetation and ecosystems. By combining
temperature, precipitation, and potential evapotranspiration Holdridge’s
classification plot divides the Earth’s surface into distinct life zones
or biomes (sensu Holdridge). It allows for the identification and
characterization of different biomes, such as tropical rainforests,
deserts, grasslands, and tundra, based on their distinct climatic
conditions and provides a unified framework for studying vegetation
patterns, ecological dynamics, and potential shifts in response to
climate change. To simplify the visualization of life zone data, we have
implemented the automatic creation of Holdridge plots by the addition of
the <code>plot_h</code> function which provides a convenient wrapper
from within <code>climenv</code> for the function
<code>PlotHoldridge</code> within the <code>Ternary</code> R package
(Smith 2017). This paper is the formal description of this plotting tool
which has been developed to complement <code>climenv</code></p>
<p><code>plot_wl</code> produces the Walter-Lieth (1960) climatic
diagram. This diagram consists of two primary components: temperature
and precipitation, which when combined in a single diagram allows for a
comprehensive visualisation of climate patterns. Specifically, it
provides insights into seasonal variations, the duration and intensity
of wet and dry periods, and the overall climate regime of a particular
location (or the average for an area encompassed by a spatial polygon).
Here our package is a wrapper for the existing <code>diagwl</code>
function of the <code>climatol</code> R package (Guijarro, 2019).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make Holdridge’s (1967) life zone classification diagram</span></span>
<span><span class="fu"><a href="../reference/plot_h.html">plot_h</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_py</span>, <span class="st">"0"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="climenv_files/figure-html/holdridge-diagram-1.png" alt="Fig 1. Position of the training data within Holdridge’s (1967) life zone classification. The surface shading in the background is new addition to the original life zone classification and helps interpretation by converting a point in evapotranspiration-precipitation space to an appropriate cross-blended hypsometric colour – in this intuitive instance colours tending towards the red spectrum feature higher temperatures blended with lower precipitation compared while colours tending towards the blue colour spectrum have lower temperatures and higher precipitation." width="480"><p class="caption">
Fig 1. Position of the training data within Holdridge’s (1967) life zone
classification. The surface shading in the background is new addition to
the original life zone classification and helps interpretation by
converting a point in evapotranspiration-precipitation space to an
appropriate cross-blended hypsometric colour – in this intuitive
instance colours tending towards the red spectrum feature higher
temperatures blended with lower precipitation compared while colours
tending towards the blue colour spectrum have lower temperatures and
higher precipitation.
</p>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make Walter-Leigh's (1960) climate diagram</span></span>
<span><span class="fu"><a href="../reference/plot_wl.html">plot_wl</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_py</span>, <span class="st">"0"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="climenv_files/figure-html/walter-leigh-diagram-1.png" alt="Fig 2. Walter-Lieth’s climatic diagram (1960) of the training data. When precipitation is &gt;
100 mm, the scale increases from 2mm C-1 to 20 mm C-1 (as indicated by
the black horizontal line) to avoid too high diagrams in very wet
locations. This change is indicated by a black horizontal line, and the
graph over is filled in solid blue. When the precipitation graph lies
under the temperature graph (P &lt; 2T) we have an arid period (filled
in dotted red vertical lines). Otherwise the period is considered humid
(filled in light blue). Daily maximum average temperature of the hottest
month and daily minimum average temperature of the coldest month are
labeled in black on the left margin of the diagram.” width=“480” /&gt;
&lt;p class=" caption>
Fig 2. Walter-Lieth’s climatic diagram (1960) of the training data. When
precipitation is &gt; 100 mm, the scale increases from 2mm C-1 to 20 mm
C-1 (as indicated by the black horizontal line) to avoid too high
diagrams in very wet locations. This change is indicated by a black
horizontal line, and the graph over is filled in solid blue. When the
precipitation graph lies under the temperature graph (P &lt; 2T) we have
an arid period (filled in dotted red vertical lines). Otherwise the
period is considered humid (filled in light blue). Daily maximum average
temperature of the hottest month and daily minimum average temperature
of the coldest month are labeled in black on the left margin of the
diagram.

</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make the custom climate diagram</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.8</span>, <span class="fl">2</span>, <span class="fl">17</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_c.html">plot_c</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_py</span>, <span class="st">"0"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="climenv_files/figure-html/custom-climate-diagram-1.png" alt="Fig 3. Custom diagram showing the climatic envelope of the training data. The abbreviations used are as follow: biotemperture (BioT), isothermality (ISO), mean annual temperature (MAT), temperature seasonality (TS), number of dry months with &lt; 50 mm rainfall during the month (Dry mo), mean annual precipitation (MAP), potential evapotranspiration (PET), precipitation seasonality (PS), seasonal rainfall percentage in Summer (S), Autumn (A), Winter (W), Vernal (V), elevation (Elv) and latitude (Lat)." width="672"><p class="caption">
Fig 3. Custom diagram showing the climatic envelope of the training
data. The abbreviations used are as follow: biotemperture (BioT),
isothermality (ISO), mean annual temperature (MAT), temperature
seasonality (TS), number of dry months with &lt; 50 mm rainfall during
the month (Dry mo), mean annual precipitation (MAP), potential
evapotranspiration (PET), precipitation seasonality (PS), seasonal
rainfall percentage in Summer (S), Autumn (A), Winter (W), Vernal (V),
elevation (Elv) and latitude (Lat).
</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by James L. Tsakalos, Martin R. Smith, Federico Luebert, Ladislav Mucina.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
